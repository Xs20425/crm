<!doctype html>
<html class="no-js">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Amaze UI Admin form Examples</title>
<meta name="description" content="这是一个form页面">
<meta name="keywords" content="form">
<style type="text/css">
.see {
	width: 130px;
	display: inline-block;
}

#seea {
	margin-left: 180px;
}

#field {
	width: 700PX;
	margin-left: 200px;
}

#areac {
	width: 300px;
	display: inline-block;
}
</style>
<% include("/common/inc/_css.html"){} %>

</head>
<body>
	<!--[if lte IE 9]>
<p class="browsehappy">你正在使用<strong>过时</strong>的浏览器，Amaze UI 暂不支持。 请 <a href="http://browsehappy.com/" target="_blank">升级浏览器</a>
  以获得更好的体验！</p>
<![endif]-->

	<% include("/common/inc/_header.html"){} %>

	<div class="am-cf admin-main">
		<!-- sidebar start -->
		<% include("/common/inc/_start.html"){} %>
		<!-- sidebar end -->

		<!-- content start -->
		<div class="admin-content">
			<div class="admin-content-body">
				<div class="am-cf am-padding am-padding-bottom-0">
					<div class="am-fl am-cf">
						<div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">合同管理	</strong> / <small>编辑</small></div>
					</div>
				</div>

				<hr>

				<form class="am-form" method="post" id="doc-vld-msg">
					<fieldset>
						<div class="am-g am-margin-top-sm">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">合同编号</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<input type="text" name="CONTRACT_NO" placeholder="合同编号" value="${contract.CONTRACT_NO}"/>
							</div>

							<div class="am-u-sm-4 am-u-md-2 am-text-right">签约时间</div>
							<div class="am-u-sm-8 am-u-md-4">
								<input type="text" id="test5" name="DATE_OF_CONTRACT" placeholder="签约时间" value="${DATE_OF_CONTRACT}"/>
							</div>
							<div class="am-hide-sm-only am-u-md-6"></div>
						</div>

						<div class="am-g am-margin-top">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">来源商机</div>
							<div class="am-u-sm-8 am-u-md-4">
								<select data-am-selected="{btnSize: 'sm'}" id="doc-select-1"
									name="BUSINESS_OPPORTUNITY_ID">
									<%
              						for(var item in business!){%>
									<option value="${item.id}" ${item.id == contract.BUSINESS_OPPORTUNITY_ID ? "selected":""}>${item.business_name}</option>
									<%}%>
								</select>
							</div>
							<div class="am-hide-sm-only am-u-md-6"></div>

							<div class="am-u-sm-4 am-u-md-2 am-text-right">联系人</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<input type="text" name="CONTACT_NAME" placeholder="联系人" class="am-input-sm" required value="${contract.CONTACT_NAME}"/>
							</div>
						</div>

						<div class="am-g am-margin-top">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">来源客户</div>
							<div class="am-u-sm-8 am-u-md-4">
								<select data-am-selected="{btnSize: 'sm'}" id="doc-select-1"
									name="CUSTOMER_ID">
									<%
              						for(var item in customers!){%>
									<option value="${item.id}" ${item.id == contract.CUSTOMER_ID ? "selected":""}>${item.customer_name}</option>
									<%}%>
								</select>
							</div>
							<div class="am-hide-sm-only am-u-md-6"></div>
							<div class="am-u-sm-4 am-u-md-2 am-text-right">状态</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<select data-am-selected="{btnSize: 'sm'}" id="doc-select-1"
									name="CONTRACT_STATUS_ID">
									<%
              						for(var item in status!){%>
									<option value="${item.id}" ${item.id == contract.CONTRACT_STATUS_ID ? "selected":""}>${item.status_name}</option>
									<%}%>
								</select>
							</div>
						</div>
						
						<div class="am-g am-margin-top-sm">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">负责人</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<select data-am-selected="{btnSize: 'sm'}" id="doc-select-1"
									name="CHARGE_USER_ID">
									<%
              						for(var item in users!){%>
									<option value="${item.id}"  ${item.id == contract.CHARGE_USER_ID ? "selected":""}>${item.username}</option>
									<%}%>
								</select>
							</div>

							<div class="am-u-sm-4 am-u-md-2 am-text-right">合同金额</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<input type="text" name="CONTRACT_MONEY" placeholder="合同金额" value="${contract.CONTRACT_MONEY}"/>
							</div>
						</div>
						
						<div class="am-g am-margin-top-sm">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">合同生效日期</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<input type="text" id="test6" name="EFFECTIVE_DATE_OF_CONTRACT" placeholder="合同生效日期" value="${EFFECTIVE_DATE_OF_CONTRACT}"/>
							</div>

							<div class="am-u-sm-4 am-u-md-2 am-text-right">合同到期日期</div>
							<div class="am-u-sm-8 am-u-md-4 am-u-end">
								<input type="text" id="test7" name="CONTRACT_EXPIRY_DATE" placeholder="合同到期日期" value="${CONTRACT_EXPIRY_DATE}"/>
							</div>
						</div>
						
						<div class="am-g am-margin-top-sm">
							<div class="am-u-sm-4 am-u-md-2 am-text-right">条件和条款</div>
							<div class="am-u-sm-8 am-u-md-10 am-u-end">
								<script id="container" name="TERMS_AND_CONDITIONS" type="text/plain">${TERMS_AND_CONDITIONS}</script>
							</div>
							<div class="am-u-sm-4 am-u-md-2 am-text-right">合同描述(不多于150个字)</div>
							<div class="am-u-sm-8 am-u-md-8 am-u-end">
								<textarea name="THE_CONTRACT_DESCRIPTION">${contract.THE_CONTRACT_DESCRIPTION}</textarea>
							</div>
						</div>
						<div class="am-margin">
							<button id="btnTypeUpdate" class="am-btn am-btn-primary am-btn-xs btn-loading-example"
								data-am-loading="{spinner: 'circle-o-notch', loadingText: '提交中...', resetText: '提交保存'}">
								提交添加</button>
							<button type="reset" class="am-btn am-btn-primary am-btn-xs">重置</button>
							<a href="${ctxPath}/contract/list"><button type="button" class="am-btn am-btn-primary am-btn-xs">返回列表</button></a>
						</div>
					</fieldset>
				</form>
			</div>
			<footer class="admin-content-footer">
				<hr>
				<p class="am-padding-left">© 2014 AllMobilize, Inc. Licensed
					under MIT license.</p>
			</footer>
		</div>
		<!-- content end -->

	</div>

	<a href="#"
		class="am-icon-btn am-icon-th-list am-show-sm-only admin-menu"
		data-am-offcanvas="{target: '#admin-offcanvas'}"></a>

	<footer>
		<hr>
		<p class="am-padding-left">© 2014 AllMobilize, Inc. Licensed under
			MIT license.</p>
	</footer>

	<% include("/common/inc/_js.html"){} %>
	<script src="${ctxPath}/assets/laydate/laydate.js"></script> <!-- 改成你的路径 -->
	<!-- ajax提交表单 -->
	<script src="${ctxPath}/assets/js/jquery.form.min.js"></script>

	<script type="text/javascript">
	
	//执行一个laydate实例(日期插件)
	laydate.render({
	  elem: '#test5'
	  ,type: 'datetime'
	});
	laydate.render({
	  elem: '#test6'
	  ,type: 'datetime'
	});
	laydate.render({
	  elem: '#test7'
	  ,type: 'datetime'
	});
	
	</script>
	<script type="text/javascript">
		 $(function(){
			$("#btnTypeUpdate").click(function(){
				$(".am-form").ajaxSubmit({
					success : function(data){
						if(data){
							alert("修改成功!");
							window.location.href="${ctxPath}/contract/list"; 
						}else{
							alert("修改失败!");
							return false;
						}
						
					}
				})
				return false;
			})
			
		}); 
		
	</script>
	<!-- 配置文件 -->
    <script type="text/javascript" src="${ctxPath}/assets/ueditor/ueditor.config.js"></script>
    <!-- 编辑器源码文件 -->
    <script type="text/javascript" src="${ctxPath}/assets/ueditor/ueditor.all.js"></script>
    <!-- 实例化编辑器 -->
    <script type="text/javascript">
        var ue = UE.getEditor('container',{  
            //initialFrameHeight:400,//设置编辑器高度  
            scaleEnabled:false  
        });  
    </script>
</body>
</html>
